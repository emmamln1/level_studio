const portfolioData = [
    // Design Lines
    {
        category: 'Design Lines',
        company: 'DESIGNLINES.EVN',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'design',
        images: [
            'image/designline/Designlinescompany.png',
            'image/designline/design.png',
            'image/designline/design1.png'
        ],
        views: 100,
        revenue: 1000,
        clients: 100
    },
    // Fashion
    {
        category: 'Fashion',
        company: 'LANJ',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'fashion',
        images: [
            'image/lanj/lanjcompany.png',
            'image/lanj/lanj.png',
            'image/lanj/lanj1.png'
        ],
        views: 100,
        revenue: 1000,
        clients: 100
    },
    // HORECA
    {
        category: 'HORECA',
        company: 'KARAP CAFE',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'image/karapcafe/karapcafecompany.png',
            'image/karapcafe/karapcafe.png',
            'image/karapcafe/karapcafe1.png'
        ],
        views: 100,
        revenue: 1000,
        clients: 100
    },
    {
        category: 'HORECA',
        company: 'HILLZONE.EVN',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'image/hillzone/hillzonecompany.png',
            'image/hillzone/hillzone.png',
            'image/hillzone/hillzone1.png'
        ]
    },
    {
        category: 'HORECA',
        company: 'DZITENI RESTAURANT',
        services: ['Photoshoot', 'Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1571997478779-2adcbbe9ab2f?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'HORECA',
        company: 'BOULEVARD HOTEL',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'image/boulevard/bulevardcompany.png',
            'image/boulevard/bulevard.png',
            'image/boulevard/bulevard1.png'
        ]
    },
    {
        category: 'HORECA',
        company: 'SOUVENIR RESTAURANT',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'image/souvenirrestaurant/souvenircompany.png',
            'image/souvenirrestaurant/souvenir.png',
            'image/souvenirrestaurant/souvenir1.png'
        ]
    },
    {
        category: 'HORECA',
        company: 'BELLA ITALIA',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'image/souvenirguesthouse/souvenirguesthousecompany.png',
            'image/souvenirguesthouse/souvenirguesthouse.png',
            'image/souvenirguesthouse/souvenirguesthouse1.png'
        ]
    },
    {
        category: 'HORECA',
        company: 'SOUVENIR GUEST HOUSE',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'HORECA',
        company: 'PALLADIUM HALL',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'https://images.unsplash.com/photo-1519167758481-83f29c7c8dc8?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'HORECA',
        company: 'RUSH PUB',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1544148103-0773bf10d330?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'HORECA',
        company: 'MY HORECA CONSULTING',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'HORECA',
        company: 'BERGAMO HOTEL',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'HORECA',
        company: 'VG COMPLEX',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'HORECA',
        company: 'ROYAL YEREVAN',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'HORECA',
        company: 'FORTE MUSIC HALL',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1519167758481-83f29c7c8dc8?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'HORECA',
        company: 'BUNIATYAN CAVIAR',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'horeca',
        images: [
            'https://images.unsplash.com/photo-1571997478779-2adcbbe9ab2f?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=500&h=300&fit=crop'
        ]
    },
    // Flower Marketing
    {
        category: 'Flower Marketing',
        company: 'GLOBAL FLOWERS',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'flower',
        images: [
            'https://images.unsplash.com/photo-1563241527-3004b7be0ffd?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1490750967868-88aa4486c946?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'Flower Marketing',
        company: 'FLORA.AM',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'flower',
        images: [
            'https://images.unsplash.com/photo-1563241527-3004b7be0ffd?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1490750967868-88aa4486c946?w=500&h=300&fit=crop'
        ]
    },
    // Kids Marketing
    {
        category: 'Kids Marketing',
        company: 'ELZA KIDS CAFE',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'kids',
        images: [
            'https://images.unsplash.com/photo-1530103862676-de8c9debad1d?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1544376664-80b17f09d399?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'Kids Marketing',
        company: 'MINIS KIDS CLUB',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'kids',
        images: [
            'https://images.unsplash.com/photo-1530103862676-de8c9debad1d?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1544376664-80b17f09d399?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'Kids Marketing',
        company: 'TUNTUNIK',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'kids',
        images: [
            'https://images.unsplash.com/photo-1530103862676-de8c9debad1d?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1544376664-80b17f09d399?w=500&h=300&fit=crop'
        ]
    },
    // Medical Marketing
    {
        category: 'Medical Marketing',
        company: 'DR. HRACH MIQAYELYAN',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'medical',
        images: [
            'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'Medical Marketing',
        company: 'PODOCLINIC',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'medical',
        images: [
            'https://images.unsplash.com/photo-1582750433449-648ed127bb54?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1559757175-0eb30cd8c063?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'Medical Marketing',
        company: 'Z & L DENTAL CLINIC',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'medical',
        images: [
            'https://images.unsplash.com/photo-1582750433449-648ed127bb54?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1559757175-0eb30cd8c063?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'Medical Marketing',
        company: 'LOREST CLINIC',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'medical',
        images: [
            'https://images.unsplash.com/photo-1582750433449-648ed127bb54?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1559757175-0eb30cd8c063?w=500&h=300&fit=crop'
        ]
    },
    // Gym Marketing
    {
        category: 'Gym Marketing',
        company: 'MULTI GIM',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'gym',
        images: [
            'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'Gym Marketing',
        company: 'LIFE TIME PREMIUM CLUB',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'gym',
        images: [
            'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500&h=300&fit=crop'
        ]
    },
    // B2C
    {
        category: 'B2C',
        company: 'MARCO ELECTRONICS',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'b2c',
        images: [
            'https://images.unsplash.com/photo-1498049794561-7780e7231661?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'B2C',
        company: 'MARCO FURNITURE',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'b2c',
        images: [
            'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1506439773649-6e0eb8cfb237?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'B2C',
        company: 'AVM GROUP',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'b2c',
        images: [
            'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1498049794561-7780e7231661?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'B2C',
        company: 'SELS CITY',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'b2c',
        images: [
            'https://images.unsplash.com/photo-1560472355-536de3962603?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'B2C',
        company: 'KELVIN',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'b2c',
        images: [
            'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1498049794561-7780e7231661?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'B2C',
        company: 'ART SAFES',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'b2c',
        images: [
            'https://images.unsplash.com/photo-1560472355-536de3962603?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1544148103-0773bf10d330?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'B2C',
        company: 'YAN NET',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'b2c',
        images: [
            'https://images.unsplash.com/photo-1498049794561-7780e7231661?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=500&h=300&fit=crop'
        ]
    },
    // B2B
    {
        category: 'B2B',
        company: 'PRIDE SANITAR',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'b2b',
        images: [
            'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1497366216548-37526070297c?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'B2B',
        company: 'NUSH PLAST',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'b2b',
        images: [
            'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1497366216548-37526070297c?w=500&h=300&fit=crop'
        ]
    },
    {
        category: 'B2B',
        company: 'ELART BUSINESS CENTER',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'b2b',
        images: [
            'https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1497366216548-37526070297c?w=500&h=300&fit=crop'
        ]
    },
    // Personal Branding
    {
        category: 'Personal Branding',
        company: 'SIGER - ARMINE GRIGORYAN',
        services: ['Social Media Marketing', 'Reel Making'],
        type: 'personal',
        images: [
            'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=500&h=300&fit=crop',
            'https://images.unsplash.com/photo-1494790108755-2616c64e5fe4?w=500&h=300&fit=crop'
        ]
    }
];

let displayedItems = 3;
const itemsPerLoad = 3;
let currentImageIndices = {};

function createWorksShowcaseItem(item, index) {
    currentImageIndices[index] = 0;
    
    const div = document.createElement('div');
    div.className = `works-showcase-item ${item.type}`;
    div.innerHTML = `
        <div class="works-showcase-image-section">
            <div class="works-showcase-gallery" id="gallery-${index}">
                ${item.images.map(img => `<img src="${img}" alt="${item.company} work" loading="lazy">`).join('')}
            </div>
            ${item.images.length > 1 ? `
                <button class="gallery-nav prev" data-item="${index}" data-direction="prev">❮</button>
                <button class="gallery-nav next" data-item="${index}" data-direction="next">❯</button>
                <div class="image-counter">
                    <span id="counter-${index}">1</span>/${item.images.length}
                </div>
            ` : ''}
        </div>
        <div class="works-showcase-content">
            <div class="works-showcase-category">${item.category}</div>
            <div class="works-showcase-company">${item.company}</div>
            <div class="works-showcase-services">
                ${item.services.map(service => `<span class="service-tag">${service}</span>`).join('')}
            </div>
        </div>
        <div class="works-showcase-results">
            <div class="result-item">
                <div class="result-number">${item.views || '25000'}</div>
                <div class="result-label">դիտում</div>
            </div>
            <div class="result-item">
                <div class="result-number">${item.revenue || '19.29$'}</div>
                <div class="result-label">գումար</div>
            </div>
            <div class="result-item">
                <div class="result-number">${item.clients || '6'}</div>
                <div class="result-label">հաճախորդ</div>
            </div>
        </div>
    `;
    
    // Add click event for modal
    const images = div.querySelectorAll('.works-showcase-gallery img');
    images.forEach(img => {
        img.addEventListener('click', () => {
            openModal(img.src);
        });
    });
    
    return div;
}

function updateGallery(itemIndex, direction) {
    const item = portfolioData[itemIndex];
    const gallery = document.getElementById(`gallery-${itemIndex}`);
    const counter = document.getElementById(`counter-${itemIndex}`);
    
    if (direction === 'next') {
        currentImageIndices[itemIndex] = (currentImageIndices[itemIndex] + 1) % item.images.length;
    } else {
        currentImageIndices[itemIndex] = currentImageIndices[itemIndex] === 0 
            ? item.images.length - 1 
            : currentImageIndices[itemIndex] - 1;
    }
    
    const translateX = -currentImageIndices[itemIndex] * 100;
    gallery.style.transform = `translateX(${translateX}%)`;
    
    if (counter) {
        counter.textContent = currentImageIndices[itemIndex] + 1;
    }
}

function openModal(imageSrc) {
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    modalImage.src = imageSrc;
    modal.classList.add('active');
}

function closeModal() {
    const modal = document.getElementById('imageModal');
    modal.classList.remove('active');
}

function renderWorksShowcase(items = portfolioData.slice(0, displayedItems)) {
    const grid = document.getElementById('worksShowcaseGrid');
    grid.innerHTML = '';
    items.forEach((item, index) => {
        const element = createWorksShowcaseItem(item, index);
        element.style.animationDelay = `${index * 0.1}s`;
        grid.appendChild(element);
    });
    
    // Add event listeners for gallery navigation
    document.querySelectorAll('.gallery-nav').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const itemIndex = parseInt(btn.dataset.item);
            const direction = btn.dataset.direction;
            updateGallery(itemIndex, direction);
        });
    });
}



// Initialize
document.addEventListener('DOMContentLoaded', function() {
    renderWorksShowcase();

    // Load more functionality
    const loadMoreBtn = document.getElementById('worksLoadMoreBtn');
    const collapseBtn = document.getElementById('worksCollapseBtn');
    
    loadMoreBtn.addEventListener('click', () => {
        displayedItems += itemsPerLoad;
        if (displayedItems >= portfolioData.length) {
            displayedItems = portfolioData.length;
            loadMoreBtn.style.display = 'none';
        }
        renderWorksShowcase();
        
        // Show collapse button when more than initial items are displayed
        if (displayedItems > 3) {
            collapseBtn.classList.remove('hidden');
        }
    });

    collapseBtn.addEventListener('click', () => {
        displayedItems = 3;
        renderWorksShowcase();
        loadMoreBtn.style.display = 'block';
        collapseBtn.classList.add('hidden');
        
        // Scroll to portfolio section
        document.getElementById('worksShowcaseSection').scrollIntoView({
            behavior: 'smooth'
        });
    });

    // Animated counter for statistics
    function animateCounter(element, target, duration = 2000) {
        let start = 0;
        const increment = target / (duration / 16);
        const timer = setInterval(() => {
            start += increment;
            element.textContent = Math.floor(start);
            if (start >= target) {
                element.textContent = target;
                clearInterval(timer);
            }
        }, 16);
    }

    // Intersection Observer for stats animation
    const statsObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const statNumbers = entry.target.querySelectorAll('.stat-number[data-target]');
                statNumbers.forEach(stat => {
                    const target = parseInt(stat.getAttribute('data-target'));
                    animateCounter(stat, target);
                    stat.removeAttribute('data-target'); // Prevent re-animation
                });
            }
        });
    }, { threshold: 0.5 });

    // Observe stats section
    const resultsSection = document.querySelector('.results-section');
    if (resultsSection) {
        statsObserver.observe(resultsSection);
    }

    // Modal functionality
    const modalClose = document.getElementById('modalClose');
    const modal = document.getElementById('imageModal');
    
    modalClose.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeModal();
        }
    });
    
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            closeModal();
        }
    });

    // Hide load more button if all items are displayed initially
    if (portfolioData.length <= displayedItems) {
        loadMoreBtn.style.display = 'none';
    }
});